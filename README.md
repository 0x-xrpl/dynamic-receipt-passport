# Dynamic Receipt Passport (DRP)


XRPL × AI Hackathon OSAKA 2025

Live demo (Vercel):
https://dynamic-receipt-passport.vercel.app/


Dynamic Receipt Passport（以下 DRP）は、XRP が利用できる世界中の都市での「レシート・スタンプ・旅の軌跡・会計データ」を、1 枚の Dynamic NFT パスポートに統合して管理することを目的とした Web アプリケーションです。


- プロジェクトの背景とコンセプト

- 想定ユーザーとユースケース

- 機能仕様と画面構成

- XRPL 連携の設計方針

- 実装技術とセットアップ手順

- 今後の拡張計画（Deep/Main Track への発展を含む）


---


## 0. プロジェクト概要


- プロジェクト名: Dynamic Receipt Passport (DRP)

- テーマ: 「レシート・スタンプ・マップ・会計」の統合パスポート

- 対象トラック: Beginner Track（XRPL Testnet を用いた入門者向けプロダクト）

- 使用技術:

  - Next.js 14 (App Router) / TypeScript

  - Tailwind CSS

  - XRPL JavaScript SDK（Testnet）

  - Node.js ベースの簡易 XRPL スクリプト

  - localStorage によるクライアントサイド保存


DRP は、XRPL Commons Residency in Paris をスターターケースとしつつ、将来的には Paris / Tokyo / Osaka / London / New York など、XRPL 決済が利用可能な世界中の都市へ拡張することを前提に設計しています。


---


## 1. プロジェクトの背景と目的（WHY）


### 1-1. 解決したい課題


海外生活や長期滞在において、以下のような課題が繰り返し発生します。


- 紙レシートが破れる・紛失する・文字が薄くなってしまう

- 仕事の経費とプライベートの支出が混在し、整理に時間がかかる

- スタンプカードが店舗ごと・国ごとにばらばらに増えていく

- 「どこで・何をしたか」という軌跡が、後から振り返りにくい


DRP は、これらを XRPL と Dynamic NFT の組み合わせで解決しようとする試みです。


### 1-2. パリ Residency を起点にする理由


XRPL Hackathon OSAKA 2025 では、XRPL Commons によるパリ 3 ヶ月のプログラムが大きな一つのゴールになっています。


- 審査員や関係者にとって「パリでの生活」という具体的なイメージが共有されている

- パリは、レシートと税務処理のルールが複雑で、記録・整理のニーズが強い

- XRPL Commons Residency 参加者は、日常的に XRP 決済スポットを利用する可能性が高い


そのため、本プロジェクトでは「パリで実際に使える」ことを起点にしつつ、他都市への展開を前提とした設計を行っています。


### 1-3. レシートを「成長する NFT」へ変換する


従来は捨ててしまうだけの紙レシートを、次のような価値へ変換します。


- 旅の履歴としての記録

- 会計・税務処理に使えるデータ

- 店舗とのロイヤリティ・スタンプ情報

- XRPL 上のトランザクションとの紐づけ


これらを 1 枚の Dynamic NFT のメタデータとして蓄積していくことにより、「使えば使うほど育っていくパスポート」として設計しています。


---


## 2. 想定ユーザーとユースケース


### 2-1. 想定ユーザー


- XRPL Commons Residency in Paris 参加者

- 海外旅行者（短期〜中長期滞在）

- 出張で海外を訪れるビジネスパーソン

- XRP 決済対応店舗の利用者


### 2-2. 代表的な利用シナリオ（パリ 3 ヶ月滞在）


1. 日々の飲食・移動・ショッピングのレシートを DRP に記録する  

2. 地図上で、自分の生活圏や訪問スポットが可視化される  

3. 月末や帰国時に、CSV/PDF で会計データをエクスポートし、経費精算や確定申告に利用する  

4. Dynamic NFT パスポート上で、自分の滞在履歴や訪問都市数などが「成長」として視覚化される  


### 2-3. 世界への展開


都市情報をレイヤーとして管理することで、以下のような展開を想定しています。


- Paris

- Tokyo

- Osaka

- London

- New York

- その他 XRPL 決済スポットの多い都市


都市の追加は、Map レイヤーと設定の追加で対応できるよう設計を行っています。


---


## 3. 機能概要


本プロジェクトは、以下の機能群で構成されています。


1. 購入記録の登録・閲覧（タイムライン表示）

2. 店舗ごとのスタンプカード（簡易ロイヤリティ）

3. Dynamic NFT パスポートビュー

4. マップ表示（購入履歴と XRPL 決済スポット）

5. 会計用エクスポート（CSV / 印刷ビュー）

6. XRPL Testnet との連携（TX Hash 表示、将来的な NFT 連携を想定）


それぞれの詳細は以下の通りです。


### 3-1. 購入記録と XRPL アンカー


登録データ例:


- 店名  

- 金額  

- VAT（消費税相当）  

- カテゴリ（飲食・交通・宿泊など）  

- 位置情報（任意）

- タイムスタンプ  

- XRPL のトランザクションハッシュ（Testnet）


Beginner Track の観点からは、


- XRPL Testnet を利用した送金・メモ書き込み

- TX Hash を画面上で確認できる


といった「XRPL の基本的な利用」を丁寧に実装することを目標としています。


### 3-2. Dynamic NFT（成長ロジック）


NFT のメタデータとして、次のような値を想定しています。


- totalPurchases（購入件数）

- totalAmount（総額）

- visitedCities（訪問都市数）

- visitedStores（訪問店舗数）

- stampCount（スタンプ合計数）


MVP 段階ではローカルでの計算・表示にとどめ、今後 XRPL 上の NFT メタデータとして同期する方向性を見据えています。


### 3-3. スタンプカード


店舗単位で、簡易的なスタンプカード機能を実装します。


- 店舗ごとに stampCount をカウント

- 一定数に達した場合、UI 上でわかりやすく達成を表示

- 将来的には、店舗側が NFT 内ページとして独自デザインを提供できる形を想定


### 3-4. マップ


Leaflet.js（または Next.js で扱いやすいマップライブラリ）を利用し、地図上で以下を表示します。


- 自身の購入履歴 → 青系ピン

- XRPL 決済対応店舗 → 別色ピン（将来的に外部データソースと連携）


ピンをクリックすると購入詳細や店舗情報が表示されます。


### 3-5. AI による分類・レポート


- 店名やメモから、支出カテゴリを推定

- VAT の推定や、簡単な会計レポート（円グラフ・棒グラフ）を生成

- Claude / OpenAI API などの利用を想定したアーキテクチャとしています


### 3-6. エクスポート機能


- CSV 形式でエクスポート（Date / Store / Category / Amount / VAT / TX Hash / City など）

- 印刷ビュー用の画面を用意し、ブラウザの印刷機能から PDF 出力が可能


---


## 4. 画面構成


想定している主要画面は以下の通りです。


- Home / Timeline  

  登録済みの購入履歴と、簡易ダッシュボードを表示

- Add Purchase  

  新しい購入情報の登録フォーム

- Passport  

  Dynamic NFT パスポートビュー。成長の可視化を行う

- Map  

  購入スポットと XRPL 決済スポットを表示

- Export  

  日付範囲を指定した集計・CSV 出力・印刷ビュー

- Settings  

  通貨単位、言語、XRPL 接続設定など（MVP では一部のみ）


---


## 5. 技術構成


### 5-1. フロントエンド


- Next.js 14（App Router）

- TypeScript

- Tailwind CSS

- 状態管理: React Context または Zustand

- 保存: localStorage（MVP）


### 5-2. XRPL 連携


- XRPL JavaScript SDK（xrpl.js）

- Testnet を利用した以下の機能

  - ウォレット生成

  - テスト送金

  - トランザクションの取得

- 購入 ID を XRPL の Memo に埋め込む設計（MVP では一部をサンプル実装）


### 5-3. Node.js スクリプト（補助）


リポジトリ内に、XRPL の基本操作を行うための Node.js スクリプト群を用意します。


- ウォレット生成  

- テスト送金  

- トランザクション確認  


これらは、Hackathon 参加者が XRPL Testnet に慣れるための「最小限のサンプル」として位置づけています。


---


## 6. セットアップ手順


以下はローカル環境での起動手順です。


### 6-1. 前提条件


- Node.js 18 以降

- npm または yarn

- Git


### 6-2. ソースコード取得


'''bash

git clone https://github.com/0x-xrpl/dynamic-receipt-passport.git

cd dynamic-receipt-passport


6-3. 依存関係のインストール


npm install


6-4. 開発サーバーの起動


以下のコマンドでローカル開発環境を起動できます。


npm run dev


ブラウザで http://localhost:3000 を開くと、DRP の画面を確認できます。

開発中はこのローカル環境で UI、XRPL 連携、NFT 表示などの機能をそのまま動作確認できます。



---


## 7. 公開（Vercel を利用することを想定）  


DRP は Next.js を基盤としているため、ローカル開発環境（npm run dev）でも本番同様の挙動を確認できます。  


最終的な公開については、  

Next.js プロジェクトの標準的な公開方法として Vercel を利用することを想定しています。  

（他のホスティングサービスでも同等の構成で動作します）  


Vercel を利用した公開手順  


- GitHub アカウントを Vercel と連携する  

- このリポジトリを Vercel 上でインポートする  

- インポート後、自動的にビルドとデプロイが実行される  

- 完了後に公開 URL が発行される  


Next.js の標準設定のままで問題なく動作するため、特別な設定は必要ありません。  


---


## 8. ディレクトリ構成（例）  


dynamic-receipt-passport/  

  ├── legacy-xrpl/        # XRPL Node.js 基礎スクリプト（サンプル）  

  ├── public/             # 画像・アイコンなどの静的ファイル  

  ├── src/  

  │   ├── app/            # Next.js App Router 用エントリ  

  │   ├── components/     # UI コンポーネント  

  │   ├── lib/            # XRPL ラッパー、AI ヘルパーなど  

  │   └── styles/         # Tailwind / グローバルスタイル  

  ├── package.json  

  ├── tsconfig.json  

  ├── next.config.ts  

  └── README.md           # 本ファイル  


---


## 9. 今後の拡張と他トラックへの発展可能性 


本プロジェクトは今回 Beginner Track 向けに、以下を優先して実装しています。  


XRPL Testnet を使った基本的な送金・トランザクション確認 


レシート・スタンプ・マップ・会計データの統合 UI  

Dynamic NFT パスポートという概念のプロトタイプ  

今後、以下のような拡張により、Deep Track / Main Track レベルへの発展が可能だと考えています。


XRPL NFT 機能との直接連携（メタデータの同期）  

AMM や Hooks を用いたロイヤリティ・ポイント処理の自動化 


店舗側ダッシュボードの実装（スタンプ設計・キャンペーン設定） 


複数チェーン・複数通貨への対応  


---


## 10. ライセンス  

検討中（ハッカソン終了後に OSS 化も視野に入れて検討します）
